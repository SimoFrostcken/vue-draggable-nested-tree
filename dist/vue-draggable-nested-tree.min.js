/*!
 * vue-draggable-nested-tree v2.0.0
 * (c) 2018-present phphe <phphe@outlook.com>
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.vueDraggableNestedTree={})}(this,function(e){"use strict";var t;try{t=global}catch(e){t=window}function r(e,t){return 1===arguments.length&&(t=e,e=0),Math.floor(Math.random()*(t-e+1)+e)}function n(e,t){for(var r,n=0;(r=e.indexOf(t))>-1;)e.splice(r,1),n++;return n}function i(e){var t=e.getBoundingClientRect(),r=function(){if("undefined"!=typeof pageYOffset)return{top:pageYOffset,left:pageXOffset};var e=document.body,t=document.documentElement;return{top:(t=t.clientHeight?t:e).scrollTop,left:t.scrollLeft}}();return{x:t.left+r.left,y:t.top+r.top}}function a(e,t){e["original_".concat(t)]=e.getAttribute(t)}function o(e,t){var r="original_".concat(t);e.setAttribute(t,e[r])}function d(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function l(e,t,r){e.addEventListener?e.addEventListener(t,r):e.attachEvent&&e.attachEvent("on".concat(t),r)}function s(e,t,r){e.removeEventListener?e.removeEventListener(t,r):e.detachEvent&&e.detachEvent("on".concat(t),r)}function c(e,t,r,n,i){var a,o,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1e3;null==r&&(r=0,n=e.length-1);for(var l,s=0;r>=0&&r<=n;){if(s>=d)throw Error("binarySearch: loop times is over ".concat(d,", you can increase the limit."));if((l=t(o=e[a=Math.floor((n-r)/2+r)],s))>0)n=a-1;else{if(!(l<0))return{index:a,value:o,count:s+1,hit:!0};r=a+1}s++}return i?{index:a,value:o,count:s+1,hit:!1,bigger:l>0}:null}function u(e){return{storage:e,set:function(e,t,r){null==t?this.storage.removeItem(e):this.storage.setItem(e,JSON.stringify({value:t,expired_at:r&&(new Date).getTime()/1e3+60*r}))},get:function(e){var t=this.storage.getItem(e);if(t){if(!(t=JSON.parse(t)).expired_at||t.expired_at>(new Date).getTime())return t.value;this.storage.removeItem(e)}return null},clear:function(){this.storage.clear()}}}var f;u(t.localStorage),u(t.sessionStorage);try{f=global}catch(e){f=window}function p(e){return"[object Array]"===Object.prototype.toString.call(e)}function h(e,t){for(var r,n=0;(r=e.indexOf(t))>-1;)e.splice(r,1),n++;return n}function g(e){return{storage:e,set:function(e,t,r){null==t?this.storage.removeItem(e):this.storage.setItem(e,JSON.stringify({value:t,expired_at:r&&(new Date).getTime()/1e3+60*r}))},get:function(e){var t=this.storage.getItem(e);if(t){if(!(t=JSON.parse(t)).expired_at||t.expired_at>(new Date).getTime())return t.value;this.storage.removeItem(e)}return null},clear:function(){this.storage.clear()}}}g(f.localStorage),g(f.sessionStorage);var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function y(e,t){var r=arguments[3],n=(p(e)?e:[e]).map(function(e,t){return{item:e,index:t}});r&&n.reverse();for(var i=function(){var e=n.shift(),i=e.item,a=e.index,o=e.parent,d=t(i,a,o);if(!1===d)return{v:void 0};if("skip children"===d)return"continue";if("skip siblings"===d&&(n=n.filter(function(e){return e.parent!==o})),i.children){var l,s=i.children;r&&(s=s.slice()).reverse();var c=s.map(function(e,t){return{item:e,index:t,parent:i}});(l=n).push.apply(l,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(c))}};n.length;){var a=i();switch(a){case"continue":continue;default:if("object"===(void 0===a?"undefined":v(a)))return a.v}}}function m(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"parent";e[n]&&h(e[n][r],e),e[n]=t}function b(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"parent";if(e!==t){var i=t[n][r],a=i.indexOf(t);i[a+1]!==e&&(e[n]===t[n]?(h(i,e),a=i.indexOf(t)):m(e,t[n]),i.splice(a+1,0,e))}}function N(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children";if(e===t)throw"can't append to self";var n=t[r];n[n.length-1]!==e&&(m(e,t),n.push(e))}var x={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tree-node",class:[e.data.active?e.store.activatedClass:"",e.data.open?e.store.openedClass:"",e.data.class],attrs:{id:e.data._id,"data-level":e.data.level}},[e.isRoot?e._e():r("div",{staticClass:"tree-node-inner-back",class:[e.data.innerBackClass],style:[e.innerBackStyle,e.data.innerBackStyle]},[r("div",{staticClass:"tree-node-inner",class:[e.data.innerClass],style:[e.data.innerStyle]},[e._t("default",null,{data:e.data,store:e.store})],2)]),e.childrenVisible?r("div",{staticClass:"tree-node-children"},e._l(e.data.children,function(t){return r("TreeNode",{key:t._id,attrs:{data:t,store:e.store},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("default",null,{data:t.data,store:t.store})]}}])})})):e._e()])},staticRenderFns:[],name:"TreeNode",props:{data:{},store:{}},data:function(){return{}},computed:{isRoot:function(){return 0===this.data.level},childrenVisible:function(){var e=this.data;return this.isRoot||e.children&&e.children.length&&e.open},innerBackStyle:function(){var e={marginBottom:this.store.space+"px"};if(!this.isRoot&&this.data.level>1){this.store.indentType;e.paddingLeft=(this.data.level-1)*this.store.indent+"px"}return e}},watch:{data:{immediate:!0,handler:function(e){e&&(e._vm=this)}},"data.parent":{immediate:!0,handler:function(e,t){e!==t&&this.store.updateBranchLevel(this.data)}}}},_={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"he-tree tree"},[r("TreeNode",{attrs:{data:e.rootData,store:e.store},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("default",null,{data:t.data,store:e.store})]}}])})],1)},staticRenderFns:[],props:{data:{},idLength:{default:5},indent:{default:16},activatedClass:{default:"active"},openedClass:{default:"open"},space:{default:10}},components:{TreeNode:x},data:function(){return{store:this,rootData:null,activated:[],opened:[],idMapping:{}}},computed:{},watch:{data:{immediate:!0,handler:function(e,t){var n=this;this.rootData=this.rootData||{isRoot:!0,_id:"tree_".concat(this._uid,"_node_root"),level:0},this.rootData.children=e;var i=[],a=[],o={};y(e,function(e,t,d){var l={open:!0,children:[],active:!1,style:{},class:"",innerStyle:{},innerClass:"",innerBackStyle:{},innerBackClass:{}};for(var s in l)e.hasOwnProperty(s)||n.$set(e,s,l[s]);n.$set(e,"parent",d||n.rootData),n.$set(e,"level",e.parent.level+1),e.hasOwnProperty("_id")||(e._id="tree_".concat(n._uid,"_node_").concat(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)n+=i[r(i.length-1)];return t+n}(n.idLength))),o[e._id]=e,e.active&&i.push(e),e.open&&a.push(e)}),this.activated=i,this.opened=a,this.idMapping=o}}},methods:{updateBranchLevel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.parent.level+1;e.level=t,e.children&&e.children.length>0&&y(e.children,function(e,t,r){e.level=e.parent.level+1})},pure:function(e,t){var r=this,n=Object.assign({},e);delete n._id,delete n.parent,delete n.children,delete n.open,delete n.level,delete n.active,delete n.style,delete n.class,delete n.innerStyle,delete n.innerClass,delete n.innerBackStyle,delete n.innerBackClass;for(var i=Object.keys(n),a=0;a<i.length;a++){var o=i[a];o.startsWidth("_")&&delete n[o]}return t&&e.children&&(n.children=e.children.slice(),n.children.forEach(function(e,i){n.children[i]=r.pure(e,t)})),n},activeNode:function(e,t){t&&(this.activated.forEach(function(e){e.active=!1}),this.activated=[]),this.activated.push(e),e.active=!0},toggleActive:function(e,t){e.active?e.active=!1:this.activeNode(e,t)},openNode:function(e,t){t&&(this.opened.forEach(function(e){e.open=!1}),this.opened=[]),this.opened.push(e),e.open=!0},toggleOpen:function(e,t){e.open?e.open=!1:this.openNode(e,t)}}};function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null==t.minTranslate&&(t.minTranslate=10);var r={movedCount:0},n=function(){s(e,"mousedown",e._draggbleEventHandler),delete e._draggbleEventHandler};return e._draggbleEventHandler&&n(),e._draggbleEventHandler=c,l(e,"mousedown",c),n;function c(e){1===e.which&&(e.stopPropagation(),l(document.body,"selectstart",h),r.mouse={x:e.pageX,y:e.pageY},r.initialMouse=Object.assign({},r.mouse),l(document,"mousemove",f),l(window,"mouseup",p))}function u(n){var o=function(){var n=t.getEl?t.getEl(e,t):e,a=n;t.clone&&(r.triggerEl=n,a=n.cloneNode(!0),n.parentElement.appendChild(a));return{position:function(e,t){var r=e.offsetLeft,n=e.offsetTop,a=i(e);return{x:t.x-(a.x-r),y:t.y-(a.y-n)}}(a,i(n)),el:a}}(),l=o.el,c=o.position;if(r.el=l,r.initialPosition=Object.assign({},c),!1===(t.drag&&t.drag(n,t,r)))return s(document.body,"selectstart",h),!1;var u=function(e){var t=e.style.display;e.style.display="block";var r={width:e.offsetWidth,height:e.offsetHeight};return e.style.display=t,r}(l),f=Object.assign({width:"".concat(u.width,"px"),height:"".concat(u.height,"px"),zIndex:9999,opacity:.6,position:"absolute",left:c.x+"px",top:c.y+"px"},t.style||t.getStyle&&t.getStyle(t)||{});for(var p in a(l,"style"),f)l.style[p]=f[p];a(l,"class"),function(e,t){d(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t)}(l,t.draggingClass);var g=document.body,v=(g.getAttribute("style")||"").trim();v.length&&!v.endsWith(";")&&(v+=";"),a(g,"style"),g.style=v+"cursor: move;"}function f(e){r.mouse={x:e.pageX,y:e.pageY};var n=r.move={x:r.mouse.x-r.initialMouse.x,y:r.mouse.y-r.initialMouse.y};if(0===r.movedCount&&t.minTranslate){var i=Math.pow(r.move.x,2),a=Math.pow(r.move.y,2);if(Math.pow(i+a,.5)<t.minTranslate)return}var o=!0;if(0===r.movedCount&&!1===u(e)&&(o=!1),o&&t.moving&&!1===t.moving(e,t,r)&&(o=!1),o){if(!r||!r.el)return;Object.assign(r.el.style,{left:r.initialPosition.x+n.x+"px",top:r.initialPosition.y+n.y+"px"}),r.movedCount++}}function p(e){if(s(document,"mousemove",f),s(window,"mouseup",p),r.movedCount>0){r.movedCount=0;var n=r.el;t.clone?n.parentElement.removeChild(n):(o(n,"style"),o(n,"class")),o(document.body,"style"),s(document.body,"selectstart",h),t.drop&&t.drop(e,t,r)}r={movedCount:0}}function h(e){e.preventDefault()}}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var w=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n={},(r="store")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}var t,r,n;return t=e,(r=[{key:"has",value:function(e){return this.store.hasOwnProperty(e)}},{key:"remember",value:function(e,t){return this.has(e)||(this.store[e]={value:t()}),this.store[e].value}},{key:"forget",value:function(e){e?this.has(e)&&delete this.store[e]:this.store={}}}])&&E(t.prototype,r),n&&E(t,n),e}();function O(e){return e||""===e}var S={nothing:function(e){},after:function(e){for(var t=e.dplh,r=e.targetNode,n=(e.currentTree,r);!n.parent._droppable;)n=n.parent;b(t,n)},before:function(e){!function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"parent";if(e!==t){var i=t[n][r],a=i.indexOf(t);i[a-1]!==e&&(e[n]===t[n]?(h(i,e),a=i.indexOf(t)):m(e,t[n]),i.splice(a,0,e))}}(e.dplh,e.targetNode)},append:function(e){var t=e.dplh,r=e.targetNode;N(t,r),r.open=!0},prepend:function(e){var t=e.dplh,r=e.targetNode;!function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children";if(e===t)throw"can't prepend to self";var n=t[r];n[0]!==e&&(m(e,t),n.splice(0,0,e))}(t,r),r.open=!0,r.open||(r.open=!0,R(e,r))},"after target parent":function(e){b(e.dplh,e.targetNode.parent)},"append prev":function(e){var t=e.dplh,r=(e.targetNode,e.node,e.targetPrev);N(t,r),r.open=!0}};function k(e,t,r,n){var i=t.length;if(n)for(var a=i-1;a>=0;a--){var o=t[a];if(o!==e.node&&r(o,a))return o}else for(var d=0;d<i;d++){var l=t[d];if(l!==e.node&&r(l,d))return l}}for(var D,C={"targetNode existed":function(e){return e.targetNode},"targetNode is placeholder":function(e){return e.targetNode.isDragPlaceHolder},"targetNode parent is root":function(e){return e.targetNode.parent.isRoot},"currentTree existed":function(e){return e.currentTree},"placeholder existed":function(e){return e.dplhEl},"placeholder in currentTree":function(e){return e.dplhElInCurrentTree},"placeholder at top":function(e){return e.dplhAtTop},"targetNode is open":function(e){return e.targetNode.open},"targetNode is root":function(e){return e.targetNode.isRoot},"targetNode has children excluding placeholder":function(e){return k(e,e.targetNode.children,function(t){return t!==e.dplh})},"targetNode is droppable":function(e){return e.targetNode._droppable},"targetNode is 1st child":function(e){return k(e,e.targetNode.parent.children,function(e){return e})===e.targetNode},"targetNode is last child":function(e){return k(e,e.targetNode.parent.children,function(e){return e},!0)===e.targetNode},"targetNode prev is droppable":function(e){return e.targetPrev._droppable},"on targetNode middle":function(e){return e.offset.y<=e.tiMiddleY},"at left":function(e){return e.offset.x<e.tiOffset.x},"at indent right":function(e){return e.offset.x>e.tiOffset.x+e.currentTree.indent}},P=Object.keys(C),I=function(){var e=P[B],t=C[e];C[e]=function(){return Boolean(t.apply(void 0,arguments))}},B=0;B<P.length;B++)I();function H(e,t,r,n){var a={event:e,el:r.el,vm:this,node:this.data,store:this.store,dplh:this.store.dplh,draggableHelperData:{opt:t,store:r}};!function(e,t,r){var n=function(n){Object.defineProperty(e,n,{get:function(){var e=this;return t.remember(n,function(){return r[n].call(e)})}})};for(var i in r)n(i)}(a,new w,{nodeInnerEl:function(){return this.el.querySelector(".tree-node-inner")},offset:function(){return i(this.nodeInnerEl)},offset2:function(){return{x:this.offset.x+this.nodeInnerEl.offsetWidth,y:this.offset.y+this.nodeInnerEl.offsetHeight}},currentTree:function(){var e=this,t=n.find(function(t){return r=e.offset.x,n=e.offset.y,a=t.$el,(o=i(a)).x<=r&&o.x+a.offsetWidth>=r&&o.y<=n&&o.y+a.offsetHeight>=n;var r,n,a,o});if(t){var o,d=this.store;if(0===r.movedCount&&(D=d,o=!0),D!==t){if(!O(d.crossTree)||!O(t.crossTree))return;D=t,o=!0}if(!O(t.droppable))return;return o&&R(a,t.rootData),t}},currentTreeRootEl:function(){return document.getElementById(this.currentTree.rootData._id)},currentTreeRootOf4:function(){return M(this.currentTreeRootEl,this.currentTree.space)},dplhEl:function(){return document.getElementById(this.dplh._id)},dplhElInCurrentTree:function(){return Boolean(this.currentTree.$el.querySelector("#".concat(this.dplh._id)))},dplhOf4:function(){return M(this.dplhEl,this.currentTree.space)},dplhAtTop:function(){return Math.abs(dplhOf4.y-this.currentTreeRootOf4.y)<5},dplhAtBottom:function(){return Math.abs(dplhOf4.y2-this.currentTreeRootOf4.y2)<5},targetNode:function(){var e=this.currentTree;if(!e)throw"no currentTree";for(var t=this.offset,r=(t.x,t.y),n=e.rootData;;){var a=n.children;if(!a)break;if(this.node.parent===n&&(a=a.slice()).splice(a.indexOf(this.node),1),0===a.length)break;var o=c(a,function(t){var n=document.getElementById(t._id),a=i(n).y;return a+n.offsetHeight+e.space<r?-1:a<=r?0:1},null,null,!0);if(!(n=o.hit?o.value:o.bigger?a[o.index-1]:o.value)){n=a[0];break}if(!n)break;var d=M(document.getElementById(n._id).querySelector(".tree-node-inner"),e.space);if(d.y<=r&&r<=d.y2)break}return n},targetNodeEl:function(){return document.getElementById(this.targetNode._id)},tiInnerEl:function(){return this.targetNodeEl.querySelector(".tree-node-inner")},tiOffset:function(){return i(this.tiInnerEl)},tiMiddleY:function(){return this.tiOffset.y+this.tiInnerEl.offsetHeight/2},targetPrevEl:function(){var e=this.targetNodeEl.previousSibling;return d(e,"dragging")&&(e=e.previousSibling),e},targetPrev:function(){var e=this.targetPrevEl.getAttribute("id");return this.currentTree.idMapping[e]}});var o={},l=function(e){if(!o.hasOwnProperty(e)){var t;try{t=C[e](a)}catch(r){t=r,console.warn("failed to execute rule '".concat(e,"'"),r)}o[e]=t}return o[e]};!0===l("currentTree existed")?!1===l("targetNode is placeholder")?!0===l("placeholder existed")?!0===l("placeholder in currentTree")?!1===l("targetNode parent is root")?!0===l("targetNode is open")?!1===l("targetNode has children excluding placeholder")?!0===l("targetNode is droppable")?!1===l("at left")?!0===l("targetNode is 1st child")?!0===l("at indent right")?S.append(a):!1===l("at indent right")&&S.after(a):!1===l("targetNode is 1st child")&&S.append(a):!0===l("at left")&&S.after(a):!1===l("targetNode is droppable")&&S.after(a):!0===l("targetNode has children excluding placeholder")&&(!0===l("targetNode is droppable")?S.prepend(a):!1===l("targetNode is droppable")&&S.after(a)):!1===l("targetNode is open")&&(!0===l("targetNode is droppable")?!1===l("at indent right")?S.after(a):!0===l("at indent right")&&S.prepend(a):!1===l("targetNode is droppable")&&S.after(a)):!0===l("targetNode parent is root")&&(!0===l("targetNode is open")?!1===l("targetNode has children excluding placeholder")?!0===l("targetNode is droppable")?!1===l("targetNode is 1st child")?!1===l("targetNode prev is droppable")?S.append(a):!0===l("targetNode prev is droppable")&&(!1===l("at indent right")?S.after(a):!0===l("at indent right")&&S.append(a)):!0===l("targetNode is 1st child")&&(!0===l("on targetNode middle")?S.before(a):!1===l("on targetNode middle")&&(!0===l("at indent right")?S.append(a):!1===l("at indent right")&&S.after(a))):!1===l("targetNode is droppable")&&(!1===l("targetNode is 1st child")?S.after(a):!0===l("targetNode is 1st child")&&(!0===l("on targetNode middle")?S.before(a):!1===l("on targetNode middle")&&S.after(a))):!0===l("targetNode has children excluding placeholder")&&(!1===l("targetNode is 1st child")?S.prepend(a):!0===l("targetNode is 1st child")&&(!0===l("on targetNode middle")?S.before(a):!1===l("on targetNode middle")&&S.prepend(a))):!1===l("targetNode is open")&&(!0===l("targetNode is 1st child")?!1===l("on targetNode middle")?!1===l("at indent right")?S.after(a):!0===l("at indent right")&&S.prepend(a):!0===l("on targetNode middle")&&S.before(a):!1===l("targetNode is 1st child")&&(!0===l("at indent right")?S.prepend(a):!1===l("at indent right")&&S.after(a)))):!1===l("placeholder in currentTree")&&S.append(a):!1===l("placeholder existed")&&S.nothing(a):!0===l("targetNode is placeholder")&&(!1===l("targetNode parent is root")?!0===l("targetNode is 1st child")?!0===l("targetNode is last child")?!1===l("at left")?S.nothing(a):!0===l("at left")&&S["after target parent"](a):!1===l("targetNode is last child")&&S.nothing(a):!1===l("targetNode is 1st child")&&(!0===l("targetNode is last child")?!0===l("targetNode prev is droppable")?!0===l("at left")?S["after target parent"](a):!1===l("at left")&&(!0===l("at indent right")?S["append prev"](a):!1===l("at indent right")&&S.nothing(a)):!1===l("targetNode prev is droppable")&&(!1===l("at left")?S.nothing(a):!0===l("at left")&&S["after target parent"](a)):!1===l("targetNode is last child")&&(!0===l("targetNode prev is droppable")?!0===l("at left")?S.nothing(a):!1===l("at left")&&(!0===l("at indent right")?S["append prev"](a):!1===l("at indent right")&&S.nothing(a)):!1===l("targetNode prev is droppable")&&S.nothing(a))):!0===l("targetNode parent is root")&&(!1===l("targetNode is 1st child")?!0===l("targetNode prev is droppable")?!0===l("at left")?S.nothing(a):!1===l("at left")&&(!0===l("at indent right")?S["append prev"](a):!1===l("at indent right")&&S.nothing(a)):!1===l("targetNode prev is droppable")&&S.nothing(a):!0===l("targetNode is 1st child")&&S.nothing(a))):!1===l("currentTree existed")&&S.nothing(a)}function M(e,t){var r=i(e);return r.x2=r.x+e.offsetWidth,r.y2=r.y+e.offsetHeight+t,r}function R(e,t){var r;r=e.store.isNodeDroppable?e.store.isNodeDroppable:function(e,t,r){return!e.hasOwnProperty("droppable")||e.droppable},t._droppable=r(t,t._vm,t._vm.store),function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children",n=arguments[3],i=p(e)?e:[e],a=function(){};try{!function e(i,o){n&&(i=i.slice()).reverse();for(var d=i.length,l=0;l<d;l++){var s=i[l],c=t(s,l,o);if(!1===c)throw new a;if("skip children"!==c){if("skip siblings"===c)break;null!=s[r]&&e(s[r],s)}}}(i)}catch(e){if(!(e instanceof a))throw e}}(t,function(n,i,a){if(n!==t)return n.isDragPlaceHolder||n===e.node?"skip children":(n._droppable=r(n,n._vm,n._vm.store),n.open?void 0:"skip children")})}var j={extends:x,name:"TreeNode",mounted:function(){var e=this;if(!this.isRoot&&!this.data.isDragPlaceHolder){var t=this.store.dplh;this.$watch("store.draggable",function(r){if(O(r)){var i=e.store.getTriggerEl?e.store.getTriggerEl(e):e.$el.querySelector(".tree-node-inner");e._draggableDestroy=T(i,{getEl:function(){return e.$el},minTranslate:10,drag:function(r,n,i){if(e.store.ondragstart&&!1===e.store.ondragstart(e.data,e,e.store,r,n,i))return!1;if(!function(e,t){var r=t.store;return r.isNodeDraggable?r.isNodeDraggable(e,t,r):!e.hasOwnProperty("draggable")||e.draggable}(e.data,e))return!1;var a=e.data.parent.children;e.startPosition={siblings:a,index:a.indexOf(e.data)},t.innerStyle.height=i.el.offsetHeight+"px",b(t,e.data),e.data.class+=" dragging"},moving:function(t,r,n){return H.call(e,t,r,n,e.store.trees)},drop:function(r,i,a){if(e.store.ondragend&&!1===e.store.ondragend(e.data,e,e.store,r,i,a));else{b(e.data,t),n(t.parent.children,t),e.data.class=e.data.class.replace(/(^| )dragging( |$)/g," ");var o=e.data.parent.children;o===e.startPosition.siblings&&o.indexOf(e.data)===e.startPosition.index||e.store.$emit("change",e.data,e,e.store),delete e.startPosition}e.store.$emit("drop",e.data,e,e.store)}})}else e._draggableDestroy&&(e._draggableDestroy(),delete e._draggableDestroy)},{immediate:!0})}}};var L=[],A={_id:"draggable_tree_drag_placeHolder",level:null,droppable:!1,isDragPlaceHolder:!0,class:"draggable-placeholder",style:{},innerStyle:{},innerClass:"draggable-placeholder-inner",innerBackStyle:{},innerBackClass:"draggable-placeholder-inner-back"},$={extends:_,props:{getTriggerEl:{type:Function},draggable:{},droppable:{default:!0},crossTree:{},ondragstart:{type:Function},ondragend:{type:Function},isNodeDraggable:{type:Function},isNodeDroppable:{type:Function}},components:{TreeNode:j},data:function(){return{dplh:A,trees:L}},watch:{idMapping:{immediate:!0,handler:function(e){e[this.dplh._id]=this.dplh}}},created:function(){L.push(this)},mounted:function(){},beforeDestroy:function(){n(L,this)}};e.Tree=_,e.TreeNode=x,e.DraggableTree=$,e.DraggableTreeNode=j,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=vue-draggable-nested-tree.min.js.map
